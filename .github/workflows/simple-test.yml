name: "Simple Terraform Test"

on:
  push:
    branches: [main]
  workflow_dispatch:
    inputs:
      action:
        description: 'Choose action'
        required: true
        default: 'test'
        type: choice
        options:
        - test
        - init

jobs:
  simple-test:
    runs-on: self-hosted
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        
      - name: List Files
        run: |
          echo "Repository contents:"
          ls -la
          echo "Terraform directory:"
          ls -la terraform/ || echo "No terraform directory found"
          
      - name: Test Action Input
        if: github.event_name == 'workflow_dispatch'
        run: |
          echo "Selected action: ${{ github.event.inputs.action }}"
          echo "Event type: ${{ github.event_name }}"
          
      - name: Test Push Trigger
        if: github.event_name == 'push'
        run: |
          echo "Triggered by push to main branch"
          echo "Event type: ${{ github.event_name }}"